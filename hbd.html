<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HBD Card - Nobel 7th Year (Vertical Photo)</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Kanit:wght@300;500;700;900&display=swap');

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Kanit', sans-serif;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background: linear-gradient(-45deg, #ff9a9e, #a18cd1, #a1c4fd, #f6d365);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            overflow: hidden;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        #startOverlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.15); 
            backdrop-filter: blur(15px);
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            z-index: 1000;
            transition: 0.5s;
        }
        #startOverlay.hidden { opacity: 0; visibility: hidden; }
        
        .start-btn {
            background: linear-gradient(135deg, #ff758c 0%, #ff7eb3 100%);
            color: white; 
            border: none; 
            width: 180px; 
            height: 180px;
            border-radius: 50%; 
            font-size: 1.4rem; 
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 15px 35px rgba(255, 117, 140, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 20px;
            line-height: 1.3;
            transition: transform 0.3s;
        }
        .start-btn:hover { transform: scale(1.1); }

        .card {
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.4);
            padding: 40px;
            border-radius: 50px;
            text-align: center;
            width: 90%;
            max-width: 450px;
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.1);
            position: relative;
            z-index: 10;
        }

        .cake-container {
            position: relative;
            margin: 20px auto;
            width: 240px;
            height: 220px;
            display: flex; flex-direction: column; align-items: center; justify-content: flex-end;
        }

        .svg-cake { width: 200px; height: auto; z-index: 1; }

        .candles-wrapper {
            position: absolute;
            top: 72px;
            display: flex; gap: 7px; z-index: 2;
        }

        .candle {
            width: 8px; height: 38px;
            background: linear-gradient(to bottom, #fff, #ffd1ff, #ff9a9e);
            border-radius: 10px; position: relative; cursor: pointer;
        }

        .flame {
            position: absolute; top: -22px; left: 50%; transform: translateX(-50%);
            width: 14px; height: 22px;
            background: radial-gradient(circle, #fff700 20%, #ff8c00 60%, transparent 90%);
            border-radius: 50% 50% 20% 20%; opacity: 0; transition: opacity 0.3s;
        }

        .flame.active {
            opacity: 1; filter: drop-shadow(0 0 10px #ff8c00);
            animation: flicker 0.6s infinite alternate;
        }

        @keyframes flicker {
            0% { transform: translateX(-50%) scale(1) rotate(-2deg); }
            100% { transform: translateX(-50%) scale(1.1) rotate(2deg); }
        }

        #blowAction {
            display: none; cursor: pointer; font-size: 3.5rem; margin-top: 15px;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        #floatingAge {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            font-size: 15rem;
            font-weight: 900;
            color: white;
            text-shadow: 0 0 30px rgba(255,255,255,0.8), 0 0 60px rgba(255,117,140,0.5);
            z-index: 100;
            pointer-events: none;
            opacity: 0;
            white-space: nowrap;
        }

        @keyframes zoomFadeIn {
            0% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
            50% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(1); opacity: 0.8; }
        }

        #giftBtn {
            display: none; 
            background: linear-gradient(90deg, #ff758c, #ff7eb3);
            color: white; border: none; padding: 18px 45px; border-radius: 50px;
            font-size: 1.3rem; font-weight: 600; cursor: pointer;
            box-shadow: 0 10px 30px rgba(255, 117, 140, 0.4); margin-top: 20px;
        }

        .popup-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.7); display: flex; justify-content: center; align-items: center;
            z-index: 200; visibility: hidden; opacity: 0; transition: 0.3s;
        }
        .popup-overlay.active { visibility: visible; opacity: 1; }
        
        .popup-content {
            background: white; padding: 30px; border-radius: 40px; text-align: center;
            width: 90%; max-width: 420px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
        }

        /* ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á */
        .birthday-photo {
            width: 100%;
            max-width: 240px; /* ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡πÉ‡∏´‡πâ‡∏î‡∏π‡∏™‡∏ß‡∏¢ */
            height: auto;
            aspect-ratio: 3 / 4; /* ‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á */
            border-radius: 25px;
            object-fit: cover;
            border: 4px solid #ff7eb3;
            margin-bottom: 20px;
            box-shadow: 0 10px 25px rgba(255,117,140,0.2);
        }

        .firework {
            position: fixed; width: 6px; height: 6px; border-radius: 50%;
            pointer-events: none; z-index: 5;
        }
    </style>
</head>
<body>

    <div id="startOverlay">
        <h1 style="margin-bottom: 30px; color: #fff; text-shadow: 0 2px 10px rgba(0,0,0,0.2);">‡∏™‡∏∏‡∏Ç‡∏™‡∏±‡∏ô‡∏ï‡πå‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î! üéÇ</h1>
        <button class="start-btn" onclick="startApp()">‡πÇ‡∏ô‡πÄ‡∏ö‡∏•<br>‡∏°‡∏≤‡πÄ‡∏õ‡πà‡∏≤‡πÄ‡∏Ñ‡πâ‡∏Å‡∏Å‡∏±‡∏ô</button>
    </div>

    <div id="floatingAge">7 ‡∏õ‡∏µ</div>

    <div class="card">
        <h2 id="statusTitle" style="color: #555; font-weight: 500;">‡∏•‡∏≠‡∏á‡∏à‡∏∏‡∏î‡πÄ‡∏ó‡∏µ‡∏¢‡∏ô‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö 7 ‡πÄ‡∏•‡πà‡∏°‚ú®</h2>
        
        <div class="cake-container">
            <div class="candles-wrapper">
                <div class="candle" onclick="lightCandle(this)"><div class="flame"></div></div>
                <div class="candle" onclick="lightCandle(this)"><div class="flame"></div></div>
                <div class="candle" onclick="lightCandle(this)"><div class="flame"></div></div>
                <div class="candle" onclick="lightCandle(this)"><div class="flame"></div></div>
                <div class="candle" onclick="lightCandle(this)"><div class="flame"></div></div>
                <div class="candle" onclick="lightCandle(this)"><div class="flame"></div></div>
                <div class="candle" onclick="lightCandle(this)"><div class="flame"></div></div>
            </div>
            
            <svg class="svg-cake" viewBox="0 0 200 160" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect x="20" y="100" width="160" height="60" rx="15" fill="#FFC1CC"/>
                <rect x="40" y="60" width="120" height="50" rx="12" fill="#FFFFFF"/>
                <path d="M40 70 Q45 80 50 70 T60 70 T70 70 T80 70 T90 70 T100 70 T110 70 T120 70 T130 70 T140 70 T150 70 T160 70" fill="none" stroke="#FFC1CC" stroke-width="4" stroke-linecap="round"/>
                <circle cx="100" cy="55" r="8" fill="#FF4D4D"/>
                <rect x="100" y="48" width="1.5" height="7" fill="#4B2C20"/>
            </svg>
        </div>

        <div id="blowAction" onclick="blowOutCandles()">
            üôè<br>
            <span style="font-size: 1.1rem; color: #5a5a5a; font-weight: 500;">‡∏Ç‡∏≠‡∏û‡∏£‡πÅ‡∏•‡πâ‡∏ß‡∏î‡∏±‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ô‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢ ‚ú®</span>
        </div>
        
        <button id="giftBtn" onclick="openGift()">‡πÄ‡∏õ‡∏¥‡∏î‡∏Ç‡∏≠‡∏á‡∏Ç‡∏ß‡∏±‡∏ç üéÅ</button>
    </div>

    <div class="popup-overlay" id="popup">
        <div class="popup-content">
            <img src="https://lh3.googleusercontent.com/d/1C8cIDh3mj5cUfssZQi4A59OhJehPC9KD" class="birthday-photo" alt="Nobel Photo">
            <h2 style="color: #ff758c; margin-bottom: 10px;">üéÅHappy Birthday NobelüéÅ</h2>
			<h2> üéÇüéÇüéÇüéÇüéÇüéÇüéÇ </h2>
            <p style="color: #666; line-height: 1.6; font-size: 0.95rem;">
                ‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡πÇ‡∏ô‡πÄ‡∏ö‡∏• ‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡πÇ‡∏•‡∏Å 
				<br> ‡∏´‡∏±‡∏ß‡πÄ‡∏£‡∏≤‡∏∞‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏î‡∏±‡∏á‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô ‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏£‡∏á 
				<br> ‡∏°‡∏µ‡∏™‡∏ï‡∏¥‡∏õ‡∏±‡∏ç‡∏ç‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡∏¢‡∏ß‡∏â‡∏•‡∏≤‡∏î ‡πÅ‡∏•‡∏∞‡∏°‡∏µ‡∏û‡∏•‡∏±‡∏á‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏£‡∏£‡∏Ñ‡πå‡∏™‡∏¥‡πà‡∏á‡∏î‡∏µ‡πÜ ‡∏ï‡πà‡∏≠‡πÑ‡∏õ!
            </p>
            <button onclick="location.reload()" style="margin-top: 20px; background: #f8f9fa; border: none; padding: 10px 25px; border-radius: 20px; cursor: pointer;">
			‡πÄ‡∏õ‡πà‡∏≤‡πÄ‡∏Ñ‡πâ‡∏Å‡πÉ‡∏´‡∏°‡πà ‡∏≠‡∏µ‡∏Å‡∏£‡∏≠‡∏ö‡∏ô‡∏∂‡∏á
			</button>
        </div>
    </div>

    <script>
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        let litCount = 0;
        let isLooping = false;
        let melodyTimeout;

        function startApp() {
            document.getElementById('startOverlay').classList.add('hidden');
            if (audioCtx.state === 'suspended') audioCtx.resume();
        }

        function playNote(freq, startTime, duration) {
            if (!isLooping && litCount === 7) return; 
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.type = 'sine'; 
            osc.frequency.setValueAtTime(freq, startTime);
            gain.gain.setValueAtTime(0, startTime);
            gain.gain.linearRampToValueAtTime(0.1, startTime + 0.01);
            gain.gain.exponentialRampToValueAtTime(0.0001, startTime + duration);
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            osc.start(startTime);
            osc.stop(startTime + duration);
        }

        const melody = [
            {f: 261.63, d: 0.4}, {f: 261.63, d: 0.4}, {f: 293.66, d: 0.8}, {f: 261.63, d: 0.8}, {f: 349.23, d: 0.8}, {f: 329.63, d: 1.6},
            {f: 261.63, d: 0.4}, {f: 261.63, d: 0.4}, {f: 293.66, d: 0.8}, {f: 261.63, d: 0.8}, {f: 392.00, d: 0.8}, {f: 349.23, d: 1.6},
            {f: 261.63, d: 0.4}, {f: 261.63, d: 0.4}, {f: 523.25, d: 0.8}, {f: 440.00, d: 0.8}, {f: 349.23, d: 0.8}, {f: 329.63, d: 0.8}, {f: 293.66, d: 0.8},
            {f: 466.16, d: 0.4}, {f: 466.16, d: 0.4}, {f: 440.00, d: 0.8}, {f: 349.23, d: 0.8}, {f: 392.00, d: 0.8}, {f: 349.23, d: 1.6}
        ];

        function playHBD() {
            if (!isLooping) return;
            if (melodyTimeout) clearTimeout(melodyTimeout);
            let time = audioCtx.currentTime + 0.1;
            let totalDuration = 0;
            melody.forEach((note) => {
                playNote(note.f, time + totalDuration, note.d);
                totalDuration += note.d;
            });
            melodyTimeout = setTimeout(() => {
                if (isLooping) playHBD();
            }, totalDuration * 1000 + 500);
        }

        function lightCandle(element) {
            const flame = element.querySelector('.flame');
            if (!flame.classList.contains('active')) {
                flame.classList.add('active');
                litCount++;
                const scale = [261.63, 293.66, 329.63, 349.23, 392.00, 440.00, 493.88];
                const osc = audioCtx.createOscillator();
                const gain = audioCtx.createGain();
                osc.type = 'sine';
                osc.frequency.setValueAtTime(scale[litCount-1], audioCtx.currentTime);
                gain.gain.setValueAtTime(0.1, audioCtx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + 0.3);
                osc.connect(gain);
                gain.connect(audioCtx.destination);
                osc.start();
                osc.stop(audioCtx.currentTime + 0.3);
                if (litCount === 7) {
                    document.getElementById('statusTitle').innerText = "üéÅ Happy Birthday Nobel üéâ";
                    document.getElementById('blowAction').style.display = "block";
                    isLooping = true;
                    playHBD();
                }
            }
        }

        function createFirework() {
            const colors = ['#ff0055', '#00ffcc', '#ffcc00', '#ff00ff', '#0099ff'];
            const x = Math.random() * window.innerWidth;
            const y = Math.random() * (window.innerHeight * 0.5);
            const color = colors[Math.floor(Math.random() * colors.length)];

            for (let i = 0; i < 30; i++) {
                const p = document.createElement('div');
                p.className = 'firework';
                p.style.left = x + 'px';
                p.style.top = y + 'px';
                p.style.background = color;
                p.style.boxShadow = `0 0 10px ${color}`;
                document.body.appendChild(p);

                const angle = Math.random() * Math.PI * 2;
                const velocity = Math.random() * 150 + 50;
                const destinationX = Math.cos(angle) * velocity;
                const destinationY = Math.sin(angle) * velocity;

                p.animate([
                    { transform: 'translate(0, 0)', opacity: 1 },
                    { transform: `translate(${destinationX}px, ${destinationY}px)`, opacity: 0 }
                ], {
                    duration: 1000 + Math.random() * 500,
                    easing: 'ease-out'
                }).onfinish = () => p.remove();
            }
        }

        function blowOutCandles() {
            isLooping = false; 
            if (melodyTimeout) clearTimeout(melodyTimeout); 
            document.querySelectorAll('.flame').forEach(f => f.classList.remove('active'));
            document.getElementById('blowAction').style.display = "none";
            document.getElementById('giftBtn').style.display = "inline-block";
            document.getElementById('statusTitle').innerText = "‡πÇ‡∏≠‡∏°‡πÄ‡∏û‡∏µ‡πä‡∏¢‡∏á!!! ‡∏î‡πâ‡∏ß‡∏¢‡∏û‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏û‡πà‡∏≠‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏©‡∏ê‡∏≤‡∏ô‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏£‡∏¥‡∏á ‚ú®";

            const ageDisplay = document.getElementById('floatingAge');
            ageDisplay.style.animation = "zoomFadeIn 3s forwards";

            let fireworksCount = 0;
            const fireworkInterval = setInterval(() => {
                createFirework();
                fireworksCount++;
                if (fireworksCount > 15) clearInterval(fireworkInterval);
            }, 150);
        }

        function openGift() {
            createConfetti();
            const chord = [261.63, 329.63, 392.00, 523.25];
            chord.forEach(f => {
                const osc = audioCtx.createOscillator();
                const gain = audioCtx.createGain();
                osc.frequency.value = f;
                gain.gain.setValueAtTime(0.1, audioCtx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + 1.5);
                osc.connect(gain);
                gain.connect(audioCtx.destination);
                osc.start();
                osc.stop(audioCtx.currentTime + 1.5);
            });
            document.getElementById('popup').classList.add('active');
        }

        function createConfetti() {
            const colors = ['#ff9a9e', '#a1c4fd', '#84fab0', '#ffecd2'];
            for (let i = 0; i < 60; i++) {
                const p = document.createElement('div');
                p.className = 'firework';
                p.style.width = '8px'; p.style.height = '8px';
                p.style.background = colors[Math.floor(Math.random() * colors.length)];
                p.style.left = Math.random() * 100 + 'vw';
                p.style.top = '-10px';
                p.style.borderRadius = '50%';
                document.body.appendChild(p);
                p.animate([{ transform: 'translateY(0)', opacity: 1 }, { transform: 'translateY(100vh) rotate(360deg)', opacity: 0 }], { duration: 2500 }).onfinish = () => p.remove();
            }
        }
    </script>
</body>
</html>