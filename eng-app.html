<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>‡∏™‡∏ß‡∏ô‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå‡∏´‡∏£‡∏£‡∏©‡∏≤ BY ‡∏û‡πà‡∏≠‡πÇ‡∏ô‡πÄ‡∏ö‡∏•</title>
    <style>
        :root { 
            --sky-top: #a1e3ff;
            --sky-bottom: #e0f7fa;
            --grass-top: #8bc34a;
            --grass-bottom: #558b2f;
            --water-drop: #4fc3f7;
            --accent: #ffb74d;
        }
        
        * { box-sizing: border-box; touch-action: manipulation; -webkit-tap-highlight-color: transparent; }
        
        body { 
            margin: 0; font-family: 'Segoe UI', Tahoma, sans-serif; background: #1a1a1a; 
            display: flex; justify-content: center; align-items: center; 
            height: 100vh; overflow: hidden; 
        }

        #game-container {
            width: 100%; max-width: 480px; height: 100%;
            background: linear-gradient(to bottom, var(--sky-top) 0%, var(--sky-bottom) 50%, var(--grass-top) 50%, var(--grass-bottom) 100%);
            position: relative; overflow: hidden; display: flex; flex-direction: column;
            box-shadow: 0 0 50px rgba(0,0,0,0.5);
        }

        /* ‡∏ï‡∏Å‡πÅ‡∏ï‡πà‡∏á‡∏ó‡πâ‡∏≠‡∏á‡∏ü‡πâ‡∏≤ */
        .sun {
            position: absolute; width: 70px; height: 70px; 
            background: radial-gradient(circle, #fff200, #ff9800);
            border-radius: 50%; top: 40px; right: 30px; 
            box-shadow: 0 0 40px #ffeb3b;
            animation: sunGlow 4s infinite ease-in-out; z-index: 1;
        }
        @keyframes sunGlow { 0%, 100% { transform: scale(1); opacity: 1; } 50% { transform: scale(1.1); opacity: 0.8; } }

        .cloud {
            position: absolute; background: white; border-radius: 50px;
            width: 90px; height: 35px; opacity: 0.85; filter: blur(1px);
            animation: moveClouds 30s infinite linear; z-index: 1;
        }
        .cloud::before, .cloud::after { content: ''; position: absolute; background: white; border-radius: 50%; }
        .cloud::before { width: 45px; height: 45px; top: -20px; left: 15px; }
        .cloud::after { width: 35px; height: 35px; top: -15px; right: 15px; }
        @keyframes moveClouds { from { left: -120px; } to { left: 110%; } }

        /* HUD */
        #hud {
            padding: 20px; background: rgba(255, 255, 255, 0.2); 
            backdrop-filter: blur(10px); color: #2e7d32;
            display: flex; justify-content: space-between; font-weight: 800;
            z-index: 100; font-size: 16px; border-bottom: 1px solid rgba(255,255,255,0.3);
        }

        #garden-view { flex: 1; position: relative; }

        .garden-item { 
            position: absolute; bottom: 0; transition: all 1.2s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
            filter: drop-shadow(2px 5px 5px rgba(0,0,0,0.2)); z-index: 5; 
        }

        /* ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏•‡∏≤‡∏Å‡∏ß‡∏≤‡∏á */
        #match-side {
            height: 38%; background: rgba(255, 255, 255, 0.85);
            padding: 15px; border-top: 5px solid #4e342e;
            display: grid; grid-template-columns: 1fr 1fr; gap: 10px; overflow-y: auto; z-index: 10;
        }

        /* ‡∏´‡∏¢‡∏î‡∏ô‡πâ‡∏≥ */
        .word-item {
            position: absolute; width: 75px; height: 95px;
            background: linear-gradient(135deg, #4fc3f7, #0288d1); 
            color: white; border-radius: 0 50% 50% 50%; 
            transform: rotate(45deg); cursor: grab; font-weight: bold; border: 2px solid rgba(255,255,255,0.8);
            box-shadow: 0 8px 15px rgba(0,0,0,0.2); z-index: 50; 
            display: flex; align-items: center; justify-content: center;
        }
        .word-text { transform: rotate(-45deg); font-size: 13px; text-align: center; pointer-events: none; text-shadow: 1px 1px 2px rgba(0,0,0,0.3); }

        .drop-zone {
            background: #fdfdfd; border: 2px solid #ddd; border-radius: 15px;
            padding: 10px; text-align: center; font-size: 14px; font-weight: bold; color: #555;
            display: flex; align-items: center; justify-content: center; height: 55px;
            transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .drop-zone.hover { background: #e3f2fd; border-color: var(--water-drop); transform: scale(1.02); }
        .drop-zone.matched { background: #81c784; color: white; border-color: transparent; }

        .animal { 
            position: absolute; bottom: 12px; z-index: 10; 
            font-size: 45px; transition: left 3.5s ease-in-out, transform 0.3s;
            user-select: none; filter: drop-shadow(2px 2px 2px rgba(0,0,0,0.1));
        }

        /* ‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡πÅ‡∏•‡∏∞‡∏õ‡∏∏‡πà‡∏°‡πÇ‡∏Æ‡∏° */
        #credit {
            position: absolute; bottom: 5px; right: 10px;
            font-size: 10px; color: rgba(255, 255, 255, 0.8);
            z-index: 1000; font-weight: bold; pointer-events: none;
        }

        .home-btn {
            position: absolute; bottom: 5px; left: 10px;
            font-size: 11px; color: #fff; background: rgba(0,0,0,0.3);
            padding: 4px 10px; border-radius: 15px; text-decoration: none;
            z-index: 1000; font-weight: bold; border: 1px solid rgba(255,255,255,0.2);
        }

        .controls { padding: 25px; background: #33691e; display: flex; justify-content: center; z-index: 100; position: relative; }
        button {
            padding: 18px 60px; font-size: 18px; cursor: pointer; border-radius: 30px;
            border: none; background: linear-gradient(to bottom, #ffa726, #fb8c00); 
            color: white; font-weight: bold; text-transform: uppercase; letter-spacing: 1px;
            box-shadow: 0 6px 0 #e65100, 0 10px 20px rgba(0,0,0,0.3); transition: 0.1s;
        }
        button:active { transform: translateY(4px); box-shadow: 0 2px 0 #e65100; }
    </style>
</head>
<body>

<div id="game-container">
    <div id="hud">
        <span>üå≥ LEVEL <span id="lvl">1</span></span>
        <span>üêæ <span id="count">1</span></span>
        <span>üçé PROGRESS <span id="score">0</span>/5</span>
    </div>

    <div id="garden-view">
        <div class="sun"></div>
        <div class="cloud" style="top: 50px; animation-duration: 40s;"></div>
        
        <div id="garden-items-layer">
            <svg class="garden-item" id="main-tree" style="left:50%; transform:translateX(-50%);" width="130" height="170" viewBox="0 0 100 100">
                <rect x="42" y="70" width="16" height="30" fill="#5D4037" />
                <circle cx="50" cy="45" r="35" fill="#2E7D32" />
            </svg>
        </div>

        <div id="words-container"></div>
        <div id="animal-layer"></div>
    </div>

    <div id="match-side"></div>

    <div class="controls">
        <a href="https://ratchakit-nbo.github.io/-nobelpainter-app/game-nobel.html" class="home-btn">üè† ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</a>
        <button onclick="fetchRandomWord()">üíß ‡∏£‡∏î‡∏ô‡πâ‡∏≥‡πÉ‡∏ô‡∏™‡∏ß‡∏ô</button>
        <div id="credit">BY-‡∏û‡πà‡∏≠‡πÇ‡∏ô‡πÄ‡∏ö‡∏•</div>
    </div>
</div>

<script>
    let score = 0;
    let level = 1;
    let activeWords = []; 
    let animals = [{emoji: 'üê∂', pos: 50, dir: 1}];
    const animalList = ['üê∂', 'üê±', 'üê∞', 'ü¶ä', 'üêª', 'üêº', 'üê®', 'üêØ', 'ü¶Å', 'üê∑', 'üê∏', 'üêµ', 'üêπ', 'üê•'];

    function playAudio(en, th) {
        window.speechSynthesis.cancel();
        const msgEn = new SpeechSynthesisUtterance(en);
        msgEn.lang = 'en-US'; msgEn.rate = 0.7;
        msgEn.onend = () => {
            setTimeout(() => {
                const msgTh = new SpeechSynthesisUtterance(th);
                msgTh.lang = 'th-TH'; msgTh.rate = 0.8;
                const v = window.speechSynthesis.getVoices().find(v => v.lang.includes('th'));
                if (v) msgTh.voice = v;
                window.speechSynthesis.speak(msgTh);
            }, 1000);
        };
        window.speechSynthesis.speak(msgEn);
    }

    async function fetchRandomWord() {
        if (activeWords.length >= 6) return;
        try {
            const response = await fetch('https://api.datamuse.com/words?rel_jjb=nature&max=100');
            const data = await response.json();
            const word = data[Math.floor(Math.random() * data.length)].word.toUpperCase();
            const transRes = await fetch(`https://api.mymemory.translated.net/get?q=${word}&langpair=en|th`);
            const transData = await transRes.json();
            let th = transData.responseData.translatedText.split(',')[0].split(';')[0].substring(0, 15);

            const wordObj = { en: word, th: th, id: 'w' + Math.random().toString(36).substr(2, 5) };
            activeWords.push(wordObj);
            createElements(wordObj);
        } catch (e) { console.error("API Error"); }
    }

    function createElements(obj) {
        const el = document.createElement('div');
        el.className = 'word-item';
        el.id = obj.id;
        el.innerHTML = `<span class="word-text">${obj.en}</span>`;
        el.draggable = true;
        el.style.left = (Math.random() * 60 + 15) + '%';
        el.style.top = '-100px';
        
        setTimeout(() => { 
            el.style.transition = "top 1.8s cubic-bezier(0.25, 0.46, 0.45, 0.94)"; 
            el.style.top = '78%'; 
        }, 50);

        el.onclick = () => playAudio(obj.en, obj.th);
        el.ondragstart = (e) => e.dataTransfer.setData("text", obj.id);
        document.getElementById('words-container').appendChild(el);

        const zone = document.createElement('div');
        zone.className = 'drop-zone';
        zone.id = 'z' + obj.id;
        zone.innerText = obj.th;
        zone.ondragover = (e) => { e.preventDefault(); zone.classList.add('hover'); };
        zone.ondragleave = () => zone.classList.remove('hover');
        zone.ondrop = (e) => {
            e.preventDefault();
            const id = e.dataTransfer.getData("text");
            if (id === obj.id) {
                zone.className = 'drop-zone matched';
                zone.innerHTML = `<span>‚úÖ ${obj.en}</span>`;
                document.getElementById(id).style.transform = 'scale(0) rotate(720deg)';
                setTimeout(() => document.getElementById(id).remove(), 500);
                activeWords = activeWords.filter(w => w.id !== id);
                playAudio(obj.en, obj.th);
                updateScore();
            }
        };
        document.getElementById('match-side').appendChild(zone);
    }

    function updateScore() {
        score++;
        document.getElementById('score').innerText = score;
        
        if (score >= 5) {
            // ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏£‡∏ö 5 ‡∏Ñ‡∏≥ ‡πÉ‡∏´‡πâ‡∏´‡∏ô‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏´‡πá‡∏ô‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà
            setTimeout(() => {
                levelUp();
            }, 800);
        }
    }

    function levelUp() {
        level++;
        score = 0;
        
        // ‡∏•‡πâ‡∏≤‡∏á‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏ô Match Side
        document.getElementById('match-side').innerHTML = '';
        // ‡∏•‡πâ‡∏≤‡∏á‡∏´‡∏¢‡∏î‡∏ô‡πâ‡∏≥‡∏ó‡∏µ‡πà‡∏Ñ‡πâ‡∏≤‡∏á‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏ô‡∏à‡∏≠
        document.getElementById('words-container').innerHTML = '';
        activeWords = [];

        animals.push({
            emoji: animalList[Math.floor(Math.random() * animalList.length)], 
            pos: Math.random() * 80,
            dir: 1
        });
        
        if (level % 3 === 0) addGardenDecoration();
        const mainTree = document.getElementById('main-tree');
        mainTree.style.transform = `translateX(-50%) scale(${1 + (level*0.1)})`;
        
        updateHUD();
    }

    function addGardenDecoration() {
        const layer = document.getElementById('garden-items-layer');
        const isFlower = Math.random() > 0.5;
        const xPos = Math.random() * 80 + 5;
        const item = isFlower ? 
            `<svg class="garden-item" style="left:${xPos}%;" width="45" height="65" viewBox="0 0 100 100">
                <rect x="45" y="60" width="10" height="40" fill="#4CAF50" />
                <circle cx="50" cy="50" r="25" fill="#f06292" />
                <circle cx="50" cy="50" r="8" fill="#fff176" />
            </svg>` :
            `<svg class="garden-item" style="left:${xPos}%;" width="90" height="120" viewBox="0 0 100 100">
                <rect x="42" y="70" width="16" height="30" fill="#5D4037" />
                <circle cx="50" cy="45" r="35" fill="#1b5e20" />
            </svg>`;
        layer.insertAdjacentHTML('beforeend', item);
    }

    function updateHUD() {
        document.getElementById('lvl').innerText = level;
        document.getElementById('count').innerText = animals.length;
        document.getElementById('score').innerText = score;
        renderAnimals();
    }

    function renderAnimals() {
        const layer = document.getElementById('animal-layer');
        layer.innerHTML = '';
        animals.forEach((ani, i) => {
            const a = document.createElement('div');
            a.className = 'animal';
            a.id = 'ani-' + i;
            a.innerText = ani.emoji;
            a.style.left = ani.pos + '%';
            layer.appendChild(a);
        });
    }

    setInterval(() => {
        animals.forEach((ani, i) => {
            let move = (Math.random() * 30);
            let newDir = Math.random() > 0.5 ? 1 : -1;
            ani.pos = Math.max(5, Math.min(85, ani.pos + (move * newDir)));
            const el = document.getElementById('ani-' + i);
            if (el) {
                el.style.left = ani.pos + '%';
                el.style.transform = newDir > 0 ? 'scaleX(1)' : 'scaleX(-1)';
            }
        });
    }, 4000);

    updateHUD();
</script>
</body>
</html>